"use strict";(self["webpackChunkmytrivia_frontend"]=self["webpackChunkmytrivia_frontend"]||[]).push([[424],{9088:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var o=s(6252),r=s(9963),n=s(3577);const a={class:"container my-2"},u=(0,o._)("h1",{class:"mb-3"},"Create a Question",-1),i=(0,o._)("button",{type:"submit",class:"btn btn-success mt-3"},"Publish",-1),c={key:0,class:"muted mt-2"};function l(t,e,s,l,d,m){return(0,o.wg)(),(0,o.iD)("div",a,[u,(0,o._)("form",{onSubmit:e[1]||(e[1]=(0,r.iM)(((...t)=>m.onSubmit&&m.onSubmit(...t)),["prevent"]))},[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.questionBody=t),class:"form-control",placeholder:"What do you want to ask?",rows:"10"},null,512),[[r.nr,d.questionBody]]),i],32),d.error?((0,o.wg)(),(0,o.iD)("p",c,(0,n.zw)(d.error),1)):(0,o.kq)("",!0)])}s(7658);var d=s(718),m={name:"QuestionEditor",props:{slug:{type:String,required:!1}},data(){return{questionBody:null,error:null}},methods:{async performNetworkRequest(){let t="/api/v1/questions/",e="POST";void 0!==this.slug&&""!==this.slug&&(t+=`${this.slug}/`,e="PUT");try{const s=await(0,d.o)({method:e,url:t,data:{content:this.questionBody}});this.$router.push({name:"question",params:{slug:s.data.slug}})}catch(s){this.error=s.responce.statusText}},onSubmit(){this.questionBody?this.questionBody.length>240?this.error="Ensure this field has no more than 240 characters!":this.performNetworkRequest():this.error="You can't send an empty question!"}},created(){document.title="Editor - QuestionTime"},async beforeRouteEnter(t,e,s){if(void 0===t.params.slug||""===t.params.slug)return s();{const e=`/api/v1/questions/${t.params.slug}/`;try{const t=await d.o.get(e);return s((e=>e.questionBody=t.data.content))}catch(o){console.log(o),alert(o.responce.statusText)}}}},h=s(3744);const p=(0,h.Z)(m,[["render",l]]);var y=p}}]);
//# sourceMappingURL=question-editor.647261e1.js.map