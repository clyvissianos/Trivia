"use strict";(self["webpackChunkmytrivia_frontend"]=self["webpackChunkmytrivia_frontend"]||[]).push([[441],{6675:function(e,s,t){t.r(s),t.d(s,{default:function(){return O}});var n=t(6252),r=t(3577),o=t(9963);const i={class:"container mt-3"},a={key:0},u={class:"mb-0"},l={class:"author-name"},w={key:1},d=(0,n._)("p",{class:"answer-added"},"You've written an answer!",-1),c=[d],h={key:2},g=(0,n._)("p",null,"Answer the Question",-1),m=(0,n._)("button",{type:"submit",class:"btn btn-success my-3"}," Submit your Answer ",-1),p={key:0,class:"error mt-2"},k={key:3},y=(0,n._)("hr",null,null,-1),b={key:1},A=(0,n._)("h1",{class:"error text-center"},"404 - Question Not Found",-1),_=[A],q={key:2},D={class:"my-4"};function v(e,s,t,d,A,v){const C=(0,n.up)("QuestionsUDComponent"),f=(0,n.up)("AnswerComponent");return(0,n.wg)(),(0,n.iD)("div",i,[A.question?((0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("h1",null,(0,r.zw)(A.question.content),1),(0,n._)("p",u,[(0,n.Uk)(" Posted by: "),(0,n._)("span",l,(0,r.zw)(A.question.author),1)]),(0,n._)("p",null,(0,r.zw)(A.question.created_at),1),v.isQuestionAuthor?((0,n.wg)(),(0,n.j4)(C,{key:0,slug:A.question.slug},null,8,["slug"])):(0,n.kq)("",!0),A.userHasAnswered?((0,n.wg)(),(0,n.iD)("div",w,c)):A.showForm?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("form",{onSubmit:s[1]||(s[1]=(0,o.iM)(((...e)=>v.onSubmit&&v.onSubmit(...e)),["prevent"]))},[g,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>A.newAnswerBody=e),class:"form-control",placeholder:"Share your knowledge...!",rows:"10"},null,512),[[o.nr,A.newAnswerBody]]),m],32),A.error?((0,n.wg)(),(0,n.iD)("p",p,(0,r.zw)(A.error),1)):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("button",{class:"btn btn-success",onClick:s[2]||(s[2]=e=>A.showForm=!0)}," Answer the question ")])),y])):((0,n.wg)(),(0,n.iD)("div",b,_)),A.question?((0,n.wg)(),(0,n.iD)("div",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(A.answers,(e=>((0,n.wg)(),(0,n.j4)(f,{key:e.uuid,answer:e,requestUser:A.requestUser,onDeleteAnswer:v.deleteAnswer},null,8,["answer","requestUser","onDeleteAnswer"])))),128))])):(0,n.kq)("",!0),(0,n._)("div",D,[(0,n.wy)((0,n._)("p",null,"...loading...",512),[[o.F8,A.loadingAnswers]]),(0,n.wy)((0,n._)("button",{onClick:s[3]||(s[3]=(...e)=>v.getQuestionAnswers&&v.getQuestionAnswers(...e)),class:"btn btn-sm btn-outline-success"}," Load More ",512),[[o.F8,A.next]])])])}t(7658);var C=t(718);const f={class:"text-muted"},x={style:{"white-space":"pre-wrap"}},U={key:0},Q={key:1},B={class:"badge bg-danger"},L=(0,n._)("hr",null,null,-1);function F(e,s,t,i,a,u){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("p",f,[(0,n._)("strong",null,(0,r.zw)(t.answer.author)+" ⋅ "+(0,r.zw)(t.answer.created_at),1)]),(0,n._)("p",x,(0,r.zw)(t.answer.body),1),u.isAnswerAuthor?((0,n.wg)(),(0,n.iD)("div",U,[(0,n.Wm)(l,{to:{name:"answer-editor",params:{uuid:t.answer.uuid}},class:"btn btn-sm btn-warning"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Edit ")])),_:1},8,["to"]),(0,n._)("button",{class:"btn btn-sm btn-danger mx-1",onClick:s[0]||(s[0]=e=>a.showDeleteConfirmationBtn=!a.showDeleteConfirmationBtn)}," Delete "),(0,n.wy)((0,n._)("button",{class:"btn btn-sm btn-outline-danger",onClick:s[1]||(s[1]=(...e)=>u.triggerDeleteAnswer&&u.triggerDeleteAnswer(...e))}," Yes, delete my answer! ",512),[[o.F8,a.showDeleteConfirmationBtn]])])):((0,n.wg)(),(0,n.iD)("div",Q,[(0,n._)("button",{class:(0,r.C_)(["btn",{"btn-warning":a.userLikedAnswer,"btn-outline-danger":!a.userLikedAnswer}]),onClick:s[2]||(s[2]=(...e)=>u.toggleLike&&u.toggleLike(...e))},[(0,n.Uk)(" Like Answer  "),(0,n._)("span",B,(0,r.zw)(a.likesCounter),1)],2)])),L])}var S={name:"AnswerComponent",props:{answer:{type:Object,required:!0},requestUser:{type:String,required:!0}},data(){return{showDeleteConfirmationBtn:!1,userLikedAnswer:this.answer.user_has_liked_answer,likesCounter:this.answer.likes_count}},computed:{isAnswerAuthor(){return this.answer.author===this.requestUser}},methods:{toggleLike(){!1===this.userLikedAnswer?this.likeAnswer():this.unLikeAnswer()},async likeAnswer(){this.userLikedAnswer=!0,this.likesCounter+=1;const e=`/api/v1/answers/${this.answer.uuid}/like/`;try{await C.o.post(e)}catch(s){console.log(s.response),alert(s.response.statusText)}},async unLikeAnswer(){this.userLikedAnswer=!1,this.likesCounter-=1;const e=`/api/v1/answers/${this.answer.uuid}/like/`;try{await C.o.delete(e)}catch(s){console.log(s.response),alert(s.response.statusText)}},triggerDeleteAnswer(){this.$emit("delete-answer",this.answer)}}},T=t(3744);const $=(0,T.Z)(S,[["render",F]]);var z=$;const H={class:"mt-3"},Y=(0,n._)("hr",null,null,-1);function P(e,s,t,r,i,a){const u=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",H,[(0,n.Wm)(u,{to:{name:"question-editor",params:{slug:t.slug}},class:"btn btn-sm btn-warning me-1"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Edit ")])),_:1},8,["to"]),(0,n._)("button",{class:"btn btn-sm btn-danger mx-1",onClick:s[0]||(s[0]=e=>i.showDeleteConfirmationBtn=!i.showDeleteConfirmationBtn)}," Delete "),(0,n.wy)((0,n._)("button",{class:"btn btn-sm btn-outline-danger",onClick:s[1]||(s[1]=(...e)=>a.deleteQuestion&&a.deleteQuestion(...e))}," Yes, delete my question! ",512),[[o.F8,i.showDeleteConfirmationBtn]]),Y])}var j={name:"QuestionsUDComponent",props:{slug:{type:String,required:!0}},data(){return{showDeleteConfirmationBtn:!1}},methods:{async deleteQuestion(){const e=`/api/v1/questions/${this.slug}/`;try{await C.o.delete(e),this.$router.push({name:"home"})}catch(s){console.log(s.response),alert(s.response.statusText)}}}};const Z=(0,T.Z)(j,[["render",P]]);var E=Z,M={name:"QuestionView",props:{slug:{type:String,required:!0}},components:{AnswerComponent:z,QuestionsUDComponent:E},data(){return{question:null,answers:[],next:null,loadingAnswers:!1,userHasAnswered:!1,showForm:!1,newAnswerBody:null,error:null,requestUser:null}},computed:{isQuestionAuthor(){return this.question.author==this.requestUser}},methods:{setRequestUser(){this.requestUser=window.localStorage.getItem("username")},setPageTitle(e){document.title=e},async getQuestionData(){const e=`/api/v1/questions/${this.slug}/`;try{const s=await C.o.get(e);this.question=s.data,this.userHasAnswered=s.data.user_has_answered,this.setPageTitle(s.data.content)}catch(s){console.log(s.response);const e="404 - Not Found!";this.setPageTitle(e)}},async getQuestionAnswers(){let e=`/api/v1/questions/${this.slug}/answers/`;this.next&&(e=this.next),this.loadingAnswers=!0;try{const s=await C.o.get(e);this.answers.push(...s.data.results),console.log(this.answers),this.loadingAnswers=!1,s.data.next?this.next=s.data.next:this.next=null}catch(s){console.log(s.response),alert(s.response.statusText)}},async onSubmit(){if(!this.newAnswerBody)return void(this.error="You can't send an empty answer!");const e=`/api/v1/questions/${this.slug}/answer/`;try{const s=await C.o.post(e,{body:this.newAnswerBody});this.answers.unshift(s.data),this.newAnswerBody=null,this.showForm=!1,this.userHasAnswered=!0,this.error&&(this.error=null)}catch(s){console.log(s.response),alert(s.response.statusText)}},async deleteAnswer(e){const s=`/api/v1/answers/${e.uuid}/`;try{await C.o.delete(s),this.answers.splice(this.answers.indexOf(e),1),this.userHasAnswered=!1}catch(t){console.log(t),alert(t.response.statusText)}}},created(){this.getQuestionData(),this.getQuestionAnswers(),this.setRequestUser()}};const N=(0,T.Z)(M,[["render",v]]);var O=N}}]);
//# sourceMappingURL=question-time.d8b8478a.js.map